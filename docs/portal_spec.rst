.. _portal_spec:

====================
Portal Specification
====================

Schema
======

**spot_instance**
^^^^^^^^^^^^^^^^^

	*Type: object. Required.*

	Specification of a Spot Instance.

spot_instance . **instance_type**
"""""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Type of AWS EC2 instance to be requested.

	Detailed description of available types can be found `here <https://aws.amazon.com/ec2/instance-types/>`_.

spot_instance . **image_id**
""""""""""""""""""""""""""""

	*Type: string. Required.*

	Id of `Amazon Machine Images (AMI) <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html>`_ to be used to launch the instance.

	For information about Deep Learning AMIa see :ref:`bellow <deep_learning_amis>`.

spot_instance . **key_pair_name**
"""""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Name of `AWS EC2 Key Pair <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html>`_ to be used to connect to the instance. The Key Pair should match the identity file.

spot_instance . **identity_file**
"""""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Location of identity file (private key) to be used for authentication when connecting to the instance. This file is generated by AWS upon creation of a new Key Pair. The identity file should match the Key Pair.

spot_instance . **security_group_id**
"""""""""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Id of `AWS EC2 Security Group <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html>`_ to be associated with the instance. Security Group controls which inbound and outbound traffic is allowed for the instance. Make sure to at least allow inbound ssh traffic (port 22).

spot_instance . **availability_zone**
"""""""""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Name of `AWS Availability Zone <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html>`_ in which to launch the instance. Availability Zone has to be within the Region, specified in the :ref:`application config <config>`.

	Note that Spot Instance prices might differ between Availability Zones.

spot_instance . **subnet_id**
"""""""""""""""""""""""""""""

	*Type: string. Required.*

	**TODO: can we request it given the AZ?**

spot_instance . **ebs_optimized**
"""""""""""""""""""""""""""""""""

	*Type: boolean. Optional.*

	Enable/disable `EBS Optimization <https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSOptimized.html>`_. An EBSâ€“optimized instance uses an optimized configuration stack and provides additional, dedicated capacity for EBS I/O.

spot_instance . **remote_user**
"""""""""""""""""""""""""""""""

	*Type: string. Required.*

	Default AMI username. For images based on Ubuntu in most cases the username will be *ubuntu*. If in doubt, check AMI usage instructions.

spot_instance . **python_virtual_env**
""""""""""""""""""""""""""""""""""""""

	*Type: string. Optional.*

	Default Python virtual environment to be used to install extra Python packages. Should be specified when *spot_instance.extra_python_packages* is specified.

spot_instance . **extra_python_packages**
"""""""""""""""""""""""""""""""""""""""""

	*Type: array of strings. Optional.*

	Extra Python packages to be installed in the default Python virtual environment.

**spot_fleet**
^^^^^^^^^^^^^^

	*Type: object. Required.*

	Specification of a Spot Instance Fleet.

spot_fleet . **iam_fleet_role**
"""""""""""""""""""""""""""""""

	*Type: string. Required.*

**persistent_volumes**
^^^^^^^^^^^^^^^^^^^^^^

	*Type: array of objects. Required.*

	Specifications of volumes to be attached.

persistent_volumes[] . **volume_id**
""""""""""""""""""""""""""""""""""""

	*Type: string. Required.*

persistent_volumes[] . **device**
"""""""""""""""""""""""""""""""""

	*Type: string. Required.*

persistent_volumes[] . **mount_point**
""""""""""""""""""""""""""""""""""""""

	*Type: string. Required.*

**channels**
^^^^^^^^^^^^

	*Type: array of objects. Required.*


channels[] . **direction**
""""""""""""""""""""""""""

	*Type: string. Required.*

channels[] . **local_path**
"""""""""""""""""""""""""""

	*Type: string. Required.*

channels[] . **remote_path**
""""""""""""""""""""""""""""

	*Type: string. Required.*

channels[] . **recursive**
""""""""""""""""""""""""""

	*Type: boolean. Optional.*

channels[] . **delay**
""""""""""""""""""""""

	*Type: float. Optional.*

----

Additional Details
==================

.. _deep_learning_amis:

Deep Learning AMIs
^^^^^^^^^^^^^^^^^^

**TODO: add details on where to find ids**
